<% @event_decorator = event_decorator if @event_decorator.nil? && event_decorator.present? %>
<div class="event">
    <div class="row">
        <div class="col-xs-12">
            <div class="top-container">
                <p><%= @event_decorator.overview %></p>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-6">
            <%= @event_decorator.favorite_photo_main %>
        </div>

        <div class="col-xs-6">
            <div class="middle-container">
                <div class="event-impressions panel panel-default">
                    <div class="panel-heading">Impression Statistics</div>
                    <div class="panel-body">
                        <table class="impressions-table">
                            <tbody>
                                <tr>
                                    <th class="col-md-11 impressions-label">Total Impressions</th>
                                    <td class="col-md-1"><%= number_with_delimiter @event_decorator.estimated_total_impressions %></td>
                                </tr>
                                <% if @event_decorator.mileage_impressions > 0 %>
                                    <tr class="impressions-row">
                                        <th class="col-md-11 impressions-label">Mileage Impressions</th>
                                        <td class="col-md-1"><%= number_with_delimiter @event_decorator.mileage_impressions %></td>
                                    </tr>
                                <% end %>
                                <% if @event_decorator.footprint_impressions > 0 %>
                                    <tr>
                                        <th class="col-md-11 impressions-label">Footprint Impressions</th>
                                        <td class="col-md-1"><%= number_with_delimiter @event_decorator.footprint_impressions %></td>
                                    </tr>
                                <% end %>
                                <% if @event_decorator.walk_by_impressions > 0 %>
                                    <tr>
                                        <th class="col-md-11 impressions-label">Walk by Impressions</th>
                                        <td class="col-md-1"><%= number_with_delimiter @event_decorator.walk_by_impressions %></td>
                                    </tr>
                                <% end %>
                                <% if @event_decorator.digital_engagements > 0 %>
                                    <tr>
                                        <th class="col-md-11 impressions-label">Digital Engagements</th>
                                        <td class="col-md-1"><%= number_with_delimiter @event_decorator.digital_engagements %></td>
                                    </tr>
                                <% end %>
                                <% if @event_decorator.extended_engagements > 0 %>
                                    <tr>
                                        <th class="col-md-11 impressions-label">Extended Engagements</th>
                                        <td class="col-md-1"><%= number_with_delimiter @event_decorator.extended_engagements %></td>
                                    </tr>
                                <% end %>
                                <% if @event_decorator.total_attendance > 0 %>
                                    <tr>
                                        <th class="col-md-11 impressions-label">Total Attendance</th>
                                        <td class="col-md-1"><%= number_with_delimiter @event_decorator.total_attendance %></td>
                                    </tr>
                                <% end %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row page-break-after">
        <% for i in 1..2 %>
            <div class="col-xs-6">
                <%= @event_decorator.favorite_photo_sub(i) %>
            </div>
        <% end %>
    </div>

    <% unless @event_decorator.event_giveaways.empty? %>
    <div class="row">
        <div class="col-xs-12">
            <div class="event-giveaways panel panel-default">
                <div class="panel-heading">Giveaways</div>
                <div class="panel-body">

                    <% @event_decorator.event_giveaways.each do |event_giveaway| %>
                        <% if event_giveaway.count_given_away && event_giveaway.count_given_away > 0 %>
                            <div class="event-giveaway">
                                <div class='giveaway-count col-xs-2'><%= number_with_delimiter event_giveaway.count_given_away %></div>
                                <div class="giveaway-item col-xs-10"><%= event_giveaway.giveaway.name %></div>
                            </div>
                        <% end %>
                    <% end %>
                </div>
            </div>
        </div>
    </div>
    <% end %>

    <% unless @event_decorator.comments.empty? %>
    <div class="row">
        <div class="col-xs-12">
            <div class="event-comments panel panel-default">
                <div class="panel-heading">Comments</div>
                <div class="panel-body">
                    <div>
                        <% @event_decorator.comments.each do |comment| %>
                            <div class="comment-text"><%= comment.content %></div>
                        <% end %>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <% end %>

    <% unless @event_decorator.favorite_photos.length < 4 %>
    <div class="row page-break-after">
        <% for i in 3..4 %>
            <div class="col-xs-6">
                <%= @event_decorator.favorite_photo_sub(i) %>
            </div>
        <% end %>
    </div>
    <% end %>

    <div class="row">
        <div class="col-xs-8 col-xs-offset-2">
            <div class="panel panel-default">
                <div class="panel-heading">Impressions Graph</div>
                <div class="panel-body">
                    <%= column_chart [
                        ['Total Impressions',     @event_decorator.estimated_total_impressions],
                        ['Mileage Impressions',   @event_decorator.mileage_impressions],
                        ['Footprint Impressions', @event_decorator.footprint_impressions],
                        ['Walk by Impressions',   @event_decorator.walk_by_impressions],
                        ['Digital Engagements',   @event_decorator.digital_engagements],
                        ['Extended Engagements',  @event_decorator.extended_engagements]
                    ] %>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <% @event_decorator.contacts.each do |contact| %>
            <div class="col-xs-6 contact">
                <div class="name"><%= contact.full_name %></div>

                <div class="position brand-primary"><%= contact.title %></div>
                <div class="location"><%= contact.address %> <span class="brand-primary">|</span> <%= contact.city_state_zip %></div>
                <div class="phone"><%= contact.m_phone %> <%= contact.d_phone %></div>
            </div>
        <% end %>
    </div>
</div>